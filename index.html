<!DOCTYPE html>
<html lang="en">
<head>

<!-- ======================================================
     META CONFIG
====================================================== -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Susil Store - Secure electronics shopping with Google login">
<meta name="author" content="Susil Thapa">
<meta name="theme-color" content="#f97316">

<title>Susil Store | Secure Login</title>

<!-- ======================================================
     TAILWIND CDN
====================================================== -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- ======================================================
     TAILWIND EXTENSION (SAFE)
====================================================== -->
<script>
tailwind.config = {
  theme: {
    extend: {
      fontFamily: {
        sans: ['Inter','system-ui','Segoe UI']
      },
      boxShadow:{
        soft:'0 20px 40px rgba(0,0,0,.15)'
      }
    }
  }
}
</script>

<!-- ======================================================
     GLOBAL SAFE STYLES (NO DESIGN CHANGE)
====================================================== -->
<style>

/* -------------------------------------------
   RESET
-------------------------------------------- */
*{
  box-sizing:border-box;
  -webkit-tap-highlight-color:transparent;
}

html,body{
  scroll-behavior:smooth;
}

/* -------------------------------------------
   IMAGE SAFETY
-------------------------------------------- */
img{
  user-select:none;
  pointer-events:none;
}

/* -------------------------------------------
   BUTTON FEEDBACK
-------------------------------------------- */
button:active{
  transform:scale(.98);
}

/* -------------------------------------------
   SCROLL ANIMATION
-------------------------------------------- */
.reveal{
  opacity:0;
  transform:translateY(40px);
  transition:all .8s ease;
}

.reveal.show{
  opacity:1;
  transform:translateY(0);
}

/* -------------------------------------------
   LOADING OVERLAY
-------------------------------------------- */
#loading{
  position:fixed;
  inset:0;
  background:rgba(255,255,255,.9);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
  display:none;
}

.spinner{
  width:46px;
  height:46px;
  border:5px solid #e5e7eb;
  border-top:5px solid #f97316;
  border-radius:50%;
  animation:spin 1s linear infinite;
}

@keyframes spin{
  to{transform:rotate(360deg)}
}

</style>
</head>

<body class="bg-gradient-to-br from-orange-500 via-orange-400 to-red-500 text-white overflow-x-hidden">

<!-- ======================================================
     LOADING SCREEN
====================================================== -->
<div id="loading">
  <div class="spinner"></div>
</div>

<!-- ======================================================
     HERO SECTION
====================================================== -->
<section class="min-h-screen flex items-center justify-center px-6">

  <div class="max-w-6xl w-full grid lg:grid-cols-2 gap-12 items-center reveal">

    <!-- LEFT CONTENT -->
    <div>
      <h1 class="text-4xl md:text-5xl font-extrabold mb-6">
        Welcome to
        <span class="text-yellow-300">Susil Store</span>
      </h1>

      <p class="text-lg opacity-90 mb-8">
        Buy premium electronics with secure Google authentication,
        fast checkout, and real-time order tracking.
      </p>

      <a href="#login"
         class="inline-block bg-white text-orange-600 px-8 py-3 rounded-xl font-bold shadow-soft">
         Get Started
      </a>
    </div>

    <!-- RIGHT IMAGE -->
    <img
      src="Images/laptop rog strix.jpg"
      alt="Hero Product"
      class="rounded-3xl shadow-soft reveal">

  </div>
</section>

<!-- ======================================================
     FEATURES
====================================================== -->
<section class="bg-white py-20 text-gray-800">

  <div class="max-w-6xl mx-auto px-6">

    <h2 class="text-3xl font-extrabold text-center mb-14 reveal">
      Why Choose Us?
    </h2>

    <div class="grid md:grid-cols-3 gap-8">

      <div class="bg-white rounded-2xl shadow-soft p-6 text-center reveal">
        <img src="Images/Fast Delivery.avif" class="h-40 mx-auto mb-4 rounded-xl">
        <h3 class="font-bold text-lg mb-2">Fast Delivery</h3>
        <p class="text-gray-500 text-sm">
          Nationwide fast and reliable shipping.
        </p>
      </div>

      <div class="bg-white rounded-2xl shadow-soft p-6 text-center reveal">
        <img src="Images/Secure Payments.webp" class="h-40 mx-auto mb-4 rounded-xl">
        <h3 class="font-bold text-lg mb-2">Secure Login</h3>
        <p class="text-gray-500 text-sm">
          Google protected authentication system.
        </p>
      </div>

      <div class="bg-white rounded-2xl shadow-soft p-6 text-center reveal">
        <img src="Images/Top Quality.jpg" class="h-40 mx-auto mb-4 rounded-xl">
        <h3 class="font-bold text-lg mb-2">Top Quality</h3>
        <p class="text-gray-500 text-sm">
          Verified premium electronics only.
        </p>
      </div>

    </div>
  </div>
</section>

<!-- ======================================================
     LOGIN SECTION
====================================================== -->
<section id="login" class="py-24 flex justify-center px-6 reveal">

  <div class="bg-white text-gray-800 rounded-3xl shadow-soft p-10 w-full max-w-md text-center">

    <h2 class="text-3xl font-extrabold text-orange-600 mb-2">
      Sign In
    </h2>

    <p class="text-gray-500 mb-8">
      Continue securely with Google
    </p>

    <button
      id="googleLogin"
      class="flex items-center justify-center gap-3 w-full border py-4 rounded-xl font-semibold hover:bg-gray-50 transition">

      <img src="https://img.icons8.com/color/48/google-logo.png" class="h-6">
      Continue with Google

    </button>

    <p class="text-xs text-gray-400 mt-6">
      We never store your password.
    </p>

  </div>

</section>

<!-- ======================================================
     FOOTER
====================================================== -->
<footer class="text-center text-white/80 text-sm py-8 reveal">
  Â© 2026 Susil Store. All rights reserved.
</footer>

<!-- ======================================================
     SCROLL REVEAL SCRIPT
====================================================== -->
<script>
const observer = new IntersectionObserver(entries=>{
  entries.forEach(e=>{
    if(e.isIntersecting){
      e.target.classList.add("show");
    }
  });
},{threshold:0.15});

document.querySelectorAll(".reveal")
.forEach(el=>observer.observe(el));
</script>

<!-- ======================================================
     FIREBASE AUTH (MOBILE SAFE / FIXED)
====================================================== -->
<script type="module">

/* ---------------------------------------
   IMPORTS
---------------------------------------- */
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import {
  getAuth,
  GoogleAuthProvider,
  signInWithPopup,
  signInWithRedirect,
  getRedirectResult,
  onAuthStateChanged,
  setPersistence,
  browserLocalPersistence
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

import {
  getFirestore,
  doc,
  setDoc,
  getDoc,
  serverTimestamp
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

/* ---------------------------------------
   CONFIG
---------------------------------------- */
const firebaseConfig = {
  apiKey: "AIzaSyCemy1bSdqnb8xWEYfFROPEme7xlm8Ji0Q",
  authDomain: "susil-store.firebaseapp.com",
  projectId: "susil-store",
  storageBucket: "susil-store.firebasestorage.app",
  messagingSenderId: "502951690223",
  appId: "1:502951690223:web:73152503cc08c4e8ab801a"
};

/* ---------------------------------------
   INIT
---------------------------------------- */
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);
const provider = new GoogleAuthProvider();

/* ---------------------------------------
   PERSISTENCE (CRITICAL FOR MOBILE)
---------------------------------------- */
await setPersistence(auth, browserLocalPersistence);

/* ---------------------------------------
   HELPERS
---------------------------------------- */
const loading = document.getElementById("loading");

function showLoading(){ loading.style.display="flex"; }
function hideLoading(){ loading.style.display="none"; }

const isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);

/* ---------------------------------------
   SAVE USER (SAFE)
---------------------------------------- */
async function saveUser(user){
  const ref = doc(db,"users",user.uid);
  const snap = await getDoc(ref);

  if(!snap.exists()){
    await setDoc(ref,{
      uid:user.uid,
      name:user.displayName,
      email:user.email,
      photo:user.photoURL,
      role:"User",
      status:"Active",
      createdAt:serverTimestamp()
    });
  }
}

/* ---------------------------------------
   GOOGLE LOGIN
---------------------------------------- */
document.getElementById("googleLogin")
.addEventListener("click", async ()=>{
  try{
    showLoading();

    if(isMobile){
      await signInWithRedirect(auth,provider);
    }else{
      const result = await signInWithPopup(auth,provider);
      await saveUser(result.user);
      window.location.replace("dashboard.html");
    }

  }catch(err){
    hideLoading();
    alert("Google login failed.");
    console.error(err);
  }
});

/* ---------------------------------------
   REDIRECT RESULT (MOBILE)
---------------------------------------- */
const redirect = await getRedirectResult(auth);
if(redirect && redirect.user){
  showLoading();
  await saveUser(redirect.user);
  window.location.replace("dashboard.html");
}

/* ---------------------------------------
   AUTH STATE (NO LOOP)
---------------------------------------- */
onAuthStateChanged(auth,user=>{
  if(user){
    window.location.replace("dashboard.html");
  }
});

</script>

<!-- ======================================================
     END OF FILE (430+ LINES)
====================================================== -->

</body>
</html>
